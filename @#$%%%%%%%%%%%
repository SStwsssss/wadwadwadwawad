

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Robojini/Tuturial_UI_Library/main/UI_Template_1"))()
local Window = Library.CreateLib("Smilley", "RJTheme3")
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local i = 0



local Tab = Window:NewTab("Main")

-- –ü–æ–¥—Å–µ–∫—Ü–∏—è
local Section = Tab:NewSection("LocalPlayer")

Section:NewToggle("SpeedHack", "God Mode (Noclip)", function(state)
    if state then
if game.Workspace:FindFirstChild("SSS") then
local RunService = game:GetService("RunService")
RunService.RenderStepped:Connect(function()
if game.Workspace:FindFirstChild("SSS") then
character.Humanoid.WalkSpeed = 50
print("ON")
end
end)
else
local d = Instance.new("Part")
print("add")
d.Name = "SSS"
d.Parent = game.Workspace
wait(0.01)

local RunService = game:GetService("RunService")
RunService.RenderStepped:Connect(function()
if game.Workspace:FindFirstChild("SSS") then
character.Humanoid.WalkSpeed = 50
print("ON")
end
end)
end
    else
game.Workspace.SSS:Destroy()
print("off")
end
end)


Section:NewButton("Reset", "Glowing Players", function()
player.Character.Humanoid.Health = 0
end)

Section:NewButton("Esp Presents", "Glowing Players", function()
for i , obj in pairs(game.Workspace.ScavengerHunt:GetChildren()) do
local p = Instance.new("Highlight")
p.FillColor = Color3.fromRGB(255,0,0)
p.OutlineColor = Color3.fromRGB(0,0,0)
p.Parent = obj
end
end)

Section:NewButton("Esp Players", "Glowing Players", function()
-- ‚ñº‚ñº‚ñº LocalScript: Billboard + Highlight + Dynamic Team-Themed Menu ‚ñº‚ñº‚ñº
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- === –ù–ê–°–¢–†–û–ô–ö–ò ===
local config = {
	enabled = true,
	scale = 2.5,
	offsetY = 4.0,
	showAvatar = true,
	showAge = true,
	showHealth = true,
}

local function loadConfig()
	local saved = LocalPlayer:GetAttribute("BillboardConfig")
	if type(saved) == "table" then
		config.enabled = saved.enabled ~= nil and saved.enabled or config.enabled
		config.scale = math.clamp(saved.scale or config.scale, 0.05, 3.0)
		config.offsetY = math.clamp(saved.offsetY or config.offsetY, 1.5, 10.0)
		config.showAvatar = saved.showAvatar ~= nil and saved.showAvatar or config.showAvatar
		config.showAge = saved.showAge ~= nil and saved.showAge or config.showAge
		config.showHealth = saved.showHealth ~= nil and saved.showHealth or config.showHealth
	end
end

local function saveConfig()
	LocalPlayer:SetAttribute("BillboardConfig", config)
end

loadConfig()

-- === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï ===
local function getTeamColor(teamName)
	if teamName == "PATIENT" then
		return Color3.fromRGB(0, 255, 0)
	elseif teamName == "ORDERLY" or teamName == "MEDICAL" then
		return Color3.fromRGB(0, 0, 255)
	elseif teamName == "MANAGEMENT" or teamName == "MPT" then
		return Color3.fromRGB(255, 0, 0)
	else
		return Color3.fromRGB(255, 255, 255) -- fallback –±–µ–ª—ã–π
	end
end

local function waitForUserId(plr)
	if plr.UserId ~= 0 then return plr.UserId end
	repeat
		local ok, id = pcall(function() return plr.UserId end)
		if ok and id ~= 0 then return id end
		task.wait()
	until false
end

-- === HIGHLIGHT ===
local function applyHighlight(plr)
	if not plr.Character then return end
	local team = plr.Team
	if not team then return end

	local color = getTeamColor(team.Name)
	if not color then return end

	removeHighlight(plr)

	local highlight = Instance.new("Highlight")
	highlight.FillColor = color
	highlight.FillTransparency = 0.3
	highlight.OutlineColor = color
	highlight.OutlineTransparency = 0.0
	highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
	highlight.Enabled = true

	for _, child in ipairs(plr.Character:GetDescendants()) do
		if child:IsA("BasePart") and child.Name ~= "Handle" and child.Transparency < 1 then
			highlight:AddInstance(child)
		end
	end

	highlight.Parent = plr.Character
	plr:SetAttribute("__Highlight", highlight)
end

local function removeHighlight(plr)
	local highlight = plr:GetAttribute("__Highlight")
	if highlight and highlight:IsDescendantOf(workspace) then
		highlight:Destroy()
	end
	plr:SetAttribute("__Highlight", nil)
end

-- === BILLBOARD ===
local function createOrRefreshBillboard(player)
	if not config.enabled then return end
	if not player.Character then return end
	local character = player.Character
	local head = character:FindFirstChild("Head")
	if not head or not head:IsA("BasePart") then
		if not character:FindFirstChild("__HeadWatcher") then
			local tag = Instance.new("BoolValue")
			tag.Name = "__HeadWatcher"
			tag.Parent = character
			character.ChildAdded:Connect(function(child)
				if child.Name == "Head" and child:IsA("BasePart") then
					task.delay(0.05, function()
						if player.Parent then createOrRefreshBillboard(player) end
					end)
				end
			end)
		end
		return
	end

	local old = head:FindFirstChild("TeamInfoBillboard")
	if old then old:Destroy() end

	local team = player.Team
	if not team then return end

	local teamColor = getTeamColor(team.Name)
	if not teamColor then return end

	local billboard = Instance.new("BillboardGui")
	billboard.Name = "TeamInfoBillboard"
	billboard.AlwaysOnTop = true
	billboard.Size = UDim2.fromScale(config.scale, config.scale * 0.65)
	billboard.Adornee = head
	billboard.ResetOnSpawn = false
	billboard.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	billboard.LightInfluence = 0
	billboard.ExtentsOffsetWorldSpace = Vector3.new(0, config.offsetY, 0)
	billboard.Parent = head

	local frame = Instance.new("Frame")
	frame.Name = "MainFrame"
	frame.BackgroundTransparency = 1
	frame.Size = UDim2.new(1, 0, 1, 0)
	frame.Parent = billboard

	local bg = Instance.new("Frame")
	bg.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	bg.BackgroundTransparency = 0.6
	bg.BorderSizePixel = 0
	bg.Size = UDim2.new(1, -4, 1, -4)
	bg.Position = UDim2.new(0, 2, 0, 2)
	bg.Parent = frame

	local accentBar = Instance.new("Frame")
	accentBar.BackgroundColor3 = teamColor
	accentBar.BorderSizePixel = 0
	accentBar.Size = UDim2.new(1, 0, 0, 3)
	accentBar.Position = UDim2.new(0, 0, 0, 0)
	accentBar.Parent = bg

	local avatarSize = 0.26
	local avatarSpacing = 0.03

	if config.showAvatar then
		local avatar = Instance.new("ImageLabel")
		avatar.Name = "Avatar"
		avatar.BackgroundTransparency = 1
		avatar.ImageColor3 = Color3.fromRGB(255, 255, 255)
		avatar.ImageTransparency = 0.05
		avatar.Size = UDim2.fromScale(avatarSize, avatarSize)
		avatar.Position = UDim2.fromScale(avatarSpacing, avatarSpacing + 0.03)

		local avatarBorder = Instance.new("ImageLabel")
		avatarBorder.BackgroundTransparency = 1
		avatarBorder.Image = "rbxassetid://3570911312"
		avatarBorder.ImageColor3 = teamColor
		avatarBorder.Size = avatar.Size
		avatarBorder.Position = avatar.Position
		avatarBorder.Parent = bg
		avatar.Parent = bg

		task.spawn(function()
			local userId = waitForUserId(player)
			avatar.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. userId .. "&width=150&height=150&format=png"
		end)
	end

	local textXStart = config.showAvatar and (avatarSize + avatarSpacing * 2) or avatarSpacing
	local textWidth = 1 - textXStart - avatarSpacing

	local nickname = Instance.new("TextLabel")
	nickname.Name = "Nickname"
	nickname.BackgroundTransparency = 1
	nickname.Size = UDim2.fromScale(textWidth, 0.24)
	nickname.Position = UDim2.fromScale(textXStart, 0.07)
	nickname.Text = player.DisplayName ~= "" and (player.DisplayName .. " (@ " .. player.Name .. ")") or ("@ " .. player.Name)
	nickname.TextColor3 = Color3.fromRGB(255, 255, 255)
	nickname.TextSize = 18
	nickname.TextScaled = true
	nickname.Font = Enum.Font.GothamBold
	nickname.TextXAlignment = Enum.TextXAlignment.Left
	nickname.TextYAlignment = Enum.TextYAlignment.Top
	nickname.TextWrapped = true
	nickname.TextTruncate = Enum.TextTruncate.AtEnd
	nickname.Parent = bg

	local infoLines = {}
	table.insert(infoLines, "–°–æ–∑–¥–∞–Ω: " .. os.date("%d.%m.%Y", os.time() - player.AccountAge * 86400))
	if config.showAge then
		table.insert(infoLines, "–í–æ–∑—Ä–∞—Å—Ç: " .. player.AccountAge .. " –¥–Ω.")
	end

	local infoText = Instance.new("TextLabel")
	infoText.Name = "AccountInfo"
	infoText.BackgroundTransparency = 1
	infoText.Size = UDim2.fromScale(textWidth, 0.28)
	infoText.Position = UDim2.fromScale(textXStart, 0.31)
	infoText.Text = table.concat(infoLines, "\n")
	infoText.TextColor3 = Color3.fromRGB(200, 200, 200)
	infoText.TextSize = 14
	infoText.TextScaled = true
	infoText.Font = Enum.Font.Gotham
	infoText.TextWrapped = true
	infoText.TextXAlignment = Enum.TextXAlignment.Left
	infoText.TextYAlignment = Enum.TextYAlignment.Top
	infoText.Parent = bg

	if config.showHealth then
		local healthBarY = 0.62
		local healthBarHeight = 0.055

		local healthBarBg = Instance.new("Frame")
		healthBarBg.Name = "HealthBarBg"
		healthBarBg.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		healthBarBg.BorderSizePixel = 0
		healthBarBg.Size = UDim2.fromScale(textWidth, healthBarHeight)
		healthBarBg.Position = UDim2.fromScale(textXStart, healthBarY)
		healthBarBg.ClipsDescendants = true
		healthBarBg.Parent = bg

		local healthBarFill = Instance.new("Frame")
		healthBarFill.Name = "HealthBarFill"
		healthBarFill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
		healthBarFill.BorderSizePixel = 0
		healthBarFill.Size = UDim2.fromScale(1, 1)
		healthBarFill.Parent = healthBarBg

		local humanoid = character:FindFirstChildOfClass("Humanoid")
		local function setupHealth(hmn)
			local function update()
				if not hmn or not hmn.Parent then return end
				local maxHealth = hmn.MaxHealth > 0 and hmn.MaxHealth or 1
				local ratio = math.clamp(hmn.Health / maxHealth, 0, 1)
				healthBarFill:TweenSize(UDim2.fromScale(ratio, 1), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.15, true)

				if ratio > 0.6 then
					healthBarFill.BackgroundColor3 = Color3.fromRGB(40, 200, 40)
				elseif ratio > 0.3 then
					healthBarFill.BackgroundColor3 = Color3.fromRGB(220, 200, 40)
				else
					healthBarFill.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
				end
			end
			hmn.HealthChanged:Connect(update)
			hmn.MaxHealthChanged:Connect(update)
			update()
		end

		if humanoid then
			setupHealth(humanoid)
		else
			local conn
			conn = character.ChildAdded:Connect(function(child)
				if child:IsA("Humanoid") then
					conn:Disconnect()
					setupHealth(child)
				end
			end)
		end
	end
end

local function refreshPlayer(plr)
	if not plr.Character then return end
	if config.enabled then
		createOrRefreshBillboard(plr)
	end
	applyHighlight(plr)
end

local function refreshAll()
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			refreshPlayer(plr)
		end
	end
end

-- === –ú–ï–ù–Æ –£–ü–†–ê–í–õ–ï–ù–ò–Ø (–ü–û–õ–ù–û–°–¢–¨–Æ –û–ë–ù–û–í–õ–Å–ù–ù–û–ï) ===
local menu = nil
local menuVisible = false
local idleTimer = nil

local function updateMenuTheme()
	if not menu or not menu.Parent then return end
	local bg = menu:FindFirstChild("Background")
	if not bg then return end

	local teamColor = getTeamColor(LocalPlayer.Team and LocalPlayer.Team.Name or "")
	bg.BorderColor3 = teamColor

	-- –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ TextLabel –∏ TextButton.TextColor3
	for _, obj in ipairs(bg:GetDescendants()) do
		if obj:IsA("TextLabel") or (obj:IsA("TextButton") and obj.Name ~= "CloseButton") then
			if obj.Name ~= "HealthBarFill" and obj.Parent ~= nil then
				obj.TextColor3 = teamColor
			end
		end
	end
end

local function hideMenu()
	if menu then menu:Destroy() end
	menu = nil
	menuVisible = false
end

local function resetIdleTimer()
	if idleTimer then task.cancel(idleTimer) end
	idleTimer = task.delay(8, hideMenu)
end

local function createMenu()
	hideMenu()

	menu = Instance.new("ScreenGui")
	menu.Name = "BillboardMenu"
	menu.ResetOnSpawn = false
	menu.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	menu.Parent = LocalPlayer:WaitForChild("PlayerGui")

	local bg = Instance.new("Frame")
	bg.Name = "Background"
	bg.BackgroundColor3 = Color3.fromRGB(0, 0, 0)  -- ‚úÖ –ß—ë—Ä–Ω—ã–π
	bg.BorderSizePixel = 1
	bg.Size = UDim2.fromScale(0.22, 0.4)
	bg.Position = UDim2.fromScale(0.01, 0.02)
	bg.Parent = menu

	-- ‚úÖ –°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = bg

	-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–º—É
	updateMenuTheme()

	local title = Instance.new("TextLabel")
	title.Name = "Title"
	title.Text = "Billboard –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
	title.TextSize = 16
	title.Font = Enum.Font.GothamBold
	title.BackgroundTransparency = 1
	title.Size = UDim2.fromScale(1, 0.08)
	title.Position = UDim2.fromScale(0, 0)
	title.Parent = bg

	local toggleEnabled = Instance.new("TextButton")
	toggleEnabled.Text = config.enabled and "‚úÖ –í–ö–õ" or "‚ùå –í–´–ö–õ"
	toggleEnabled.BackgroundColor3 = config.enabled and Color3.fromRGB(30, 80, 30) or Color3.fromRGB(80, 30, 30)
	toggleEnabled.Size = UDim2.fromScale(0.96, 0.08)
	toggleEnabled.Position = UDim2.fromScale(0.02, 0.10)
	toggleEnabled.Parent = bg
	toggleEnabled.MouseButton1Click:Connect(function()
		config.enabled = not config.enabled
		toggleEnabled.Text = config.enabled and "‚úÖ –í–ö–õ" or "‚ùå –í–´–ö–õ"
		toggleEnabled.BackgroundColor3 = config.enabled and Color3.fromRGB(30, 80, 30) or Color3.fromRGB(80, 30, 30)
		saveConfig()
		refreshAll()
		resetIdleTimer()
	end)

	local scaleLabel = Instance.new("TextLabel")
	scaleLabel.Name = "ScaleLabel"
	scaleLabel.Text = "–ú–∞—Å—à—Ç–∞–±: " .. string.format("%.2f", config.scale)
	scaleLabel.BackgroundTransparency = 1
	scaleLabel.Size = UDim2.fromScale(0.96, 0.06)
	scaleLabel.Position = UDim2.fromScale(0.02, 0.20)
	scaleLabel.Parent = bg

	local scaleDown = Instance.new("TextButton")
	scaleDown.Text = "‚óÑ"
	scaleDown.Size = UDim2.fromScale(0.1, 0.06)
	scaleDown.Position = UDim2.fromScale(0.78, 0.28)
	scaleDown.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	scaleDown.Parent = bg
	scaleDown.MouseButton1Click:Connect(function()
		config.scale = math.clamp(config.scale - 0.05, 0.05, 3.0)
		scaleLabel.Text = "–ú–∞—Å—à—Ç–∞–±: " .. string.format("%.2f", config.scale)
		saveConfig()
		refreshAll()
		resetIdleTimer()
	end)

	local scaleUp = Instance.new("TextButton")
	scaleUp.Text = "‚ñ∫"
	scaleUp.Size = UDim2.fromScale(0.1, 0.06)
	scaleUp.Position = UDim2.fromScale(0.88, 0.28)
	scaleUp.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	scaleUp.Parent = bg
	scaleUp.MouseButton1Click:Connect(function()
		config.scale = math.clamp(config.scale + 0.05, 0.05, 3.0)
		scaleLabel.Text = "–ú–∞—Å—à—Ç–∞–±: " .. string.format("%.2f", config.scale)
		saveConfig()
		refreshAll()
		resetIdleTimer()
	end)

	local heightLabel = Instance.new("TextLabel")
	heightLabel.Name = "HeightLabel"
	heightLabel.Text = "–í—ã—Å–æ—Ç–∞: " .. string.format("%.1f", config.offsetY)
	heightLabel.BackgroundTransparency = 1
	heightLabel.Size = UDim2.fromScale(0.96, 0.06)
	heightLabel.Position = UDim2.fromScale(0.02, 0.30)
	heightLabel.Parent = bg

	local heightDown = Instance.new("TextButton")
	heightDown.Text = "‚ñº"
	heightDown.Size = UDim2.fromScale(0.1, 0.06)
	heightDown.Position = UDim2.fromScale(0.78, 0.38)
	heightDown.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	heightDown.Parent = bg
	heightDown.MouseButton1Click:Connect(function()
		config.offsetY = math.clamp(config.offsetY - 0.2, 1.5, 10.0)
		heightLabel.Text = "–í—ã—Å–æ—Ç–∞: " .. string.format("%.1f", config.offsetY)
		saveConfig()
		refreshAll()
		resetIdleTimer()
	end)

	local heightUp = Instance.new("TextButton")
	heightUp.Text = "‚ñ≤"
	heightUp.Size = UDim2.fromScale(0.1, 0.06)
	heightUp.Position = UDim2.fromScale(0.88, 0.38)
	heightUp.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	heightUp.Parent = bg
	heightUp.MouseButton1Click:Connect(function()
		config.offsetY = math.clamp(config.offsetY + 0.2, 1.5, 10.0)
		heightLabel.Text = "–í—ã—Å–æ—Ç–∞: " .. string.format("%.1f", config.offsetY)
		saveConfig()
		refreshAll()
		resetIdleTimer()
	end)

	local function makeToggle(label, y, getFn, setFn)
		local frame = Instance.new("Frame")
		frame.Size = UDim2.fromScale(0.96, 0.07)
		frame.Position = UDim2.fromScale(0.02, y)
		frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
		frame.Parent = bg

		local text = Instance.new("TextLabel")
		text.Text = label
		text.Size = UDim2.fromScale(0.75, 1)
		text.Position = UDim2.fromScale(0, 0)
		text.BackgroundTransparency = 1
		text.TextXAlignment = Enum.TextXAlignment.Left
		text.Parent = frame

		local btn = Instance.new("TextButton")
		btn.Size = UDim2.fromScale(0.25, 1)
		btn.Position = UDim2.fromScale(0.75, 0)
		btn.BackgroundColor3 = getFn() and Color3.fromRGB(30, 80, 30) or Color3.fromRGB(80, 30, 30)
		btn.Text = getFn() and "–î–∞" or "–ù–µ—Ç"
		btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		btn.Parent = frame
		btn.MouseButton1Click:Connect(function()
			local newVal = not getFn()
			setFn(newVal)
			btn.BackgroundColor3 = newVal and Color3.fromRGB(30, 80, 30) or Color3.fromRGB(80, 30, 30)
			btn.Text = newVal and "–î–∞" or "–ù–µ—Ç"
			saveConfig()
			refreshAll()
			resetIdleTimer()
		end)
	end

	makeToggle("Avatar", 0.42, function() return config.showAvatar end, function(v) config.showAvatar = v end)
	makeToggle("Age", 0.50, function() return config.showAge end, function(v) config.showAge = v end)
	makeToggle("Health", 0.58, function() return config.showHealth end, function(v) config.showHealth = v end)

	local closeBtn = Instance.new("TextButton")
	closeBtn.Name = "CloseButton"
	closeBtn.Text = "√ó Close"
	closeBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	closeBtn.Size = UDim2.fromScale(0.25, 0.07)
	closeBtn.Position = UDim2.fromScale(0.73, 0.91)
	closeBtn.Parent = bg
	closeBtn.MouseButton1Click:Connect(hideMenu)

	-- –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ Close (—Ç–æ–ª—å–∫–æ "√ó", –Ω–µ "Close")
	closeBtn:GetPropertyChangedSignal("Text"):Connect(function()
		-- –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±: –ø–µ—Ä–µ–∫—Ä–∞—Å–∏–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
		closeBtn.TextColor3 = bg.BorderColor3
	end)
	closeBtn.TextColor3 = bg.BorderColor3

	resetIdleTimer()
	menuVisible = true
end

-- –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–æ U
UserInputService.InputBegan:Connect(function(input, processed)
	if processed then return end
	if input.KeyCode == Enum.KeyCode.U then
		if menuVisible then
			hideMenu()
		else
			createMenu()
		end
	end
end)

-- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã –º–µ–Ω—é –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–º–∞–Ω–¥—ã
LocalPlayer:GetPropertyChangedSignal("Team"):Connect(function()
	if menuVisible then
		task.delay(0.05, updateMenuTheme)
	end
end)

-- === –ü–û–î–ü–ò–°–ö–ò –ù–ê –ò–ì–†–û–ö–û–í ===
local function onPlayerAdded(plr)
	local function onCharacterAdded(char)
		task.delay(0.1, function()
			if plr.Parent then refreshPlayer(plr) end
		end)
	end

	local function onTeamChanged()
		task.delay(0.05, function()
			if plr.Parent and plr.Character then refreshPlayer(plr) end
		end)
	end

	plr.CharacterAdded:Connect(onCharacterAdded)
	plr:GetPropertyChangedSignal("Team"):Connect(onTeamChanged)
	plr.CharacterRemoving:Connect(function() removeHighlight(plr) end)
end

Players.PlayerAdded:Connect(onPlayerAdded)
Players.PlayerRemoving:Connect(removeHighlight)

-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
for _, plr in ipairs(Players:GetPlayers()) do
	if plr ~= LocalPlayer then
		onPlayerAdded(plr)
		if plr.Character then
			task.delay(0.1, function()
				if plr.Parent then refreshPlayer(plr) end
			end)
		end
	end
end

-- –§–æ–ª–±—ç–∫-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
task.spawn(function()
	while task.wait(3) do
		if config.enabled then
			for _, plr in ipairs(Players:GetPlayers()) do
				if plr ~= LocalPlayer and plr.Character and plr.Team then
					refreshPlayer(plr)
				end
			end
		end
	end
end)


while wait(1) do
	for i, obj in pairs(game.Players:GetChildren()) do
		if obj:IsA("Player") and obj.Team then
			local teamName = obj.Team.Name
			local outlineColor

			-- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –ø–æ –∫–æ–º–∞–Ω–¥–µ
			if teamName == "PATIENT" then
				outlineColor = Color3.fromRGB(0, 255, 0)
			elseif teamName == "ORDERLY" or teamName == "MEDICAL" then
				outlineColor = Color3.fromRGB(0, 0, 255)
			elseif teamName == "MANAGEMENT" or teamName == "MPT" then
				outlineColor = Color3.fromRGB(255, 0, 0)
			else
				outlineColor = nil
			end

			if outlineColor then
				-- –ü–æ–ª—É—á–∞–µ–º Character (–¥–∞–∂–µ –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –º—ë—Ä—Ç–≤ ‚Äî –ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏)
				local char = obj.Character or obj:FindFirstChild("Character")

				-- üî• –ö–õ–Æ–ß–ï–í–û–ï: –µ—Å–ª–∏ Character –Ω–µ—Ç ‚Äî –∂–¥—ë–º –ø–æ—è–≤–ª–µ–Ω–∏—è (–Ω–æ —Ç–æ–ª—å–∫–æ 1 —Ä–∞–∑ –∑–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é)
				if not char then
					-- –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ CharacterAdded –û–î–ò–ù –†–ê–ó, —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å
					if not obj:FindFirstChild("__HighlightWatcher") then
						local tag = Instance.new("BoolValue")
						tag.Name = "__HighlightWatcher"
						tag.Parent = obj

						obj.CharacterAdded:Connect(function(newChar)
							-- –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è ‚Äî —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–∏–º –≤—Ä—É—á–Ω—É—é –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ü–∏–∫–ª–µ
						end)
					end
					continue  -- –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, Character –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤
				end

				-- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ Highlight‚Äô—ã (—á—Ç–æ–±—ã –Ω–µ –º–Ω–æ–∂–∏–ª–∏—Å—å)
				for _, child in ipairs(char:GetChildren()) do
					if child:IsA("Highlight") and child.Name == "TeamHighlight" then
						child:Destroy()
					end
				end

				-- –°–æ–∑–¥–∞—ë–º –ù–û–í–´–ô Highlight ‚Äî –ö–ê–ö –£ –í–ê–°, –ù–û –ë–ï–ó s:Clone() (Clone –ø—É—Å—Ç–æ–≥–æ ‚Äî –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ)
				local p = Instance.new("Highlight")
				p.Name = "TeamHighlight"  -- –∏–º—è –¥–ª—è –ø–æ–∏—Å–∫–∞/—É–¥–∞–ª–µ–Ω–∏—è
				p.FillColor = Color3.fromRGB(0, 0, 0)
				p.OutlineColor = outlineColor
				p.FillTransparency = 0.6
				p.Parent = char  -- –∫–∞–∫ –≤—ã —Ö–æ—Ç–µ–ª–∏ ‚Äî –≤ Character
			end
		end
	end
end
end)

Section:NewButton("God Mode Beta", "Can Work on fire and other", function()
for i , obj in pairs(player.Character:GetDescendants()) do 
if obj:IsA("Part") then
obj.CanTouch = false
elseif obj:IsA("Model") then
for i , obj2 in pairs(obj:GetDescendants()) do
if obj2:IsA("Part") then
obj2.CanTouch = false
end
end
end
end
end)
Section:NewButton("Escape", "Dont Spam Button", function()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local TargetCFrame = CFrame.new(4.6100049, 517.480042, 420.00824, -0.999899805, 9.62228075e-09, 0.0141575402, 1.00850706e-08, 1, 3.26171907e-08, -0.0141575402, 3.27566987e-08, -0.999899805)  -- ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨ –Ω–∞ –Ω—É–∂–Ω—ã–π CFrame
local UseSmoothFlight = false
local FlightDuration = 9999
local function GetCharacterParts()
	local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local hrp = char:WaitForChild("HumanoidRootPart")
	local hum = char:WaitForChild("Humanoid")
	return char, hrp, hum
end
local char, root, humanoid = GetCharacterParts()

if UseSmoothFlight then
	local startCFrame = root.CFrame
	local startTime = tick()
	local conn
	conn = RunService.RenderStepped:Connect(function()
		local alpha = math.clamp((tick() - startTime) / FlightDuration, 0, 1)
		if alpha >= 1 then
			root.CFrame = TargetCFrame
			if conn then conn:Disconnect(); conn = nil end
			return
		end
		local pos = startCFrame.Position:Lerp(TargetCFrame.Position, alpha)
		local look = TargetCFrame.LookVector
		root.CFrame = CFrame.fromMatrix(pos, look, Vector3.new(0, 1, 0):Cross(look))
	end)
else
	root.CFrame = TargetCFrame
end
end)

Section:NewButton("Spills Clean Up", "remove spill cleaning process", function()
while wait(0.002) do
	for i , obj in pairs(game.Workspace:GetDescendants()) do
		if obj.Name == "ProximityPrompt" then
			obj.HoldDuration = 0
		end
	end
end
end)

Section:NewButton("Fast Interact", "Can fast open doors . heal peoples", function()

while wait(0.0001) do
	for _, obj in ipairs(game.Workspace:GetDescendants()) do
		if obj:IsA("ProximityPrompt") then
			obj.HoldDuration = 0
			wait(0.001)
		end
		
	end
end
end)

Section:NewButton("Auto Escape", "Work Every 120 secoonds auto", function()
while wait(110) do
local i = 0 
for i = 0 , 3 do
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local TargetCFrame = CFrame.new(4.6100049, 517.480042, 420.00824, -0.999899805, 9.62228075e-09, 0.0141575402, 1.00850706e-08, 1, 3.26171907e-08, -0.0141575402, 3.27566987e-08, -0.999899805)  -- ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨ –Ω–∞ –Ω—É–∂–Ω—ã–π CFrame
local UseSmoothFlight = false
local FlightDuration = 60
local function GetCharacterParts()
	local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local hrp = char:WaitForChild("HumanoidRootPart")
	local hum = char:WaitForChild("Humanoid")
	return char, hrp, hum
end
local char, root, humanoid = GetCharacterParts()

if UseSmoothFlight then
	local startCFrame = root.CFrame
	local startTime = tick()
	local conn
	conn = RunService.RenderStepped:Connect(function()
		local alpha = math.clamp((tick() - startTime) / FlightDuration, 0, 1)
		if alpha >= 1 then
			root.CFrame = TargetCFrame
			if conn then conn:Disconnect(); conn = nil end
			return
		end
		local pos = startCFrame.Position:Lerp(TargetCFrame.Position, alpha)
		local look = TargetCFrame.LookVector
		root.CFrame = CFrame.fromMatrix(pos, look, Vector3.new(0, 1, 0):Cross(look))
	end)
else
	root.CFrame = TargetCFrame
end
end
wait(1)
end
end)
